"use strict";const fireworks={},filler={},bouncer={},tree={},aquarium={},bear={},stars={},canvas={el:document.getElementById("celebrationCanvas"),ctx:null,resize:function(){canvas.el.width=$(document).width(),canvas.el.height=$(window).height()},show:function(){$("body").css("overflow","hidden"),canvas.resize(),null===canvas.ctx&&(canvas.ctx=canvas.el.getContext("2d")),$(canvas.el).show()},hide:function(){$("body").css("overflow","auto"),$(canvas.el).hide()},getSize:function(){return{x:canvas.el.width=$(document).width(),y:canvas.el.height}}},rainbow=function(size=12){const rainbow=[],sin_to_hex=function(i,phase){var sin=Math.sin(Math.PI/size*2*i+phase),int,hex=(Math.floor(127*sin)+128).toString(16);return 1===hex.length?"0"+hex:hex};for(var i=0;i<size;i++){var red=sin_to_hex(i,0*Math.PI*2/3),blue=sin_to_hex(i,1*Math.PI*2/3),green=sin_to_hex(i,2*Math.PI*2/3);rainbow[i]="#"+red+green+blue}return rainbow};!function(){const colors=["#ffc000","#ff3b3b","#ff8400"],bubbles=25;window.explode=(x,y)=>{let particles=[],ratio=window.devicePixelRatio,c=document.createElement("canvas"),ctx=c.getContext("2d");c.style.position="absolute",c.style.left=x-100+"px",c.style.top=y-100+"px",c.style.pointerEvents="none",c.style.width="200px",c.style.height="200px",c.style.zIndex=100,c.width=200*ratio,c.height=200*ratio,document.body.appendChild(c);for(var i=0;i<25;i++)particles.push({x:c.width/2,y:c.height/2,radius:r(20,30),color:colors[Math.floor(Math.random()*colors.length)],rotation:r(0,360,!0),speed:r(8,12),friction:.9,opacity:r(0,.5,!0),yVel:0,gravity:.1});render(particles,ctx,c.width,c.height),setTimeout(()=>document.body.removeChild(c),1e3)};const render=(particles,ctx,width,height)=>(requestAnimationFrame(()=>render(particles,ctx,width,height)),ctx.clearRect(0,0,width,height),particles.forEach((p,i)=>{p.x+=p.speed*Math.cos(p.rotation*Math.PI/180),p.y+=p.speed*Math.sin(p.rotation*Math.PI/180),p.opacity-=.01,p.speed*=p.friction,p.radius*=p.friction,p.yVel+=p.gravity,p.y+=p.yVel,p.opacity<0||p.radius<0||(ctx.beginPath(),ctx.globalAlpha=p.opacity,ctx.fillStyle=p.color,ctx.arc(p.x,p.y,p.radius,0,2*Math.PI,!1),ctx.fill())}),ctx),r=(a,b,c)=>parseFloat((Math.random()*((a||1)-(b||0))+(b||0)).toFixed(c||0))}(),function(){var width=0,height=0,vanishPointY=0,vanishPointX=0,focalLength=300,angleZ=180,cycle=0,colors={r:255,g:0,b:0},animate=!0;class Emitter{constructor(){this.reset()}reset(){var PART_NUM=200,x=400*Math.random()-200,y=400*Math.random()-200,z=800*Math.random()-200;this.x=x||0,this.y=y||0,this.z=z||0,this.particles=[];for(var i=0;i<200;i++)this.particles.push(new Particle(this.x,this.y,this.z,{r:colors.r,g:colors.g,b:colors.b}))}update(){var partLen=this.particles.length;this.particles.sort((function(a,b){return b.z-a.z}));for(var i=0;i<partLen;i++)this.particles[i].update();this.particles.length<=0&&this.reset()}render(imgData){for(var data=imgData.data,i=0;i<this.particles.length;i++){var particle=this.particles[i],dist=Math.sqrt((particle.x-particle.ox)*(particle.x-particle.ox)+(particle.y-particle.oy)*(particle.y-particle.oy)+(particle.z-particle.oz)*(particle.z-particle.oz));if(dist>255&&(particle.render=!1,this.particles.splice(i,1),this.particles.length--),particle.render&&particle.xPos<width&&particle.xPos>0&&particle.yPos>0&&particle.yPos<height)for(var w=0;w<particle.size;w++)for(var h=0;h<particle.size;h++)if(particle.xPos+w<width&&particle.xPos+w>0&&particle.yPos+h>0&&particle.yPos+h<height){var pData=4*(~~(particle.xPos+w)+~~(particle.yPos+h)*width);data[pData]=particle.color[0],data[pData+1]=particle.color[1],data[pData+2]=particle.color[2],data[pData+3]=255-dist}}}}function Particle(x,y,z,color){this.x=x,this.y=y,this.z=z,this.startX=this.x,this.startY=this.y,this.startZ=this.z,this.ox=this.x,this.oy=this.y,this.oz=this.z,this.xPos=0,this.yPos=0,this.vx=10*Math.random()-5,this.vy=10*Math.random()-5,this.vz=10*Math.random()-5,this.color=[color.r,color.g,color.b],this.render=!0,this.size=Math.round(1+1*Math.random())}function render(){if(animate){colorCycle();for(var imgData=canvas.ctx.createImageData(width,height),i=0;i<30;i++)emitters[i].update(),emitters[i].render(imgData);canvas.ctx.putImageData(imgData,0,0),requestAnimationFrame(render)}}function colorCycle(){(cycle+=.6)>100&&(cycle=0),colors.r=~~(127*Math.sin(.3*cycle+0)+128),colors.g=~~(127*Math.sin(.3*cycle+2)+128),colors.b=~~(127*Math.sin(.3*cycle+4)+128)}Particle.prototype.rotate=function(){var x=this.startX*Math.cos(180)-this.startY*Math.sin(180),y=this.startY*Math.cos(180)+this.startX*Math.sin(180);this.x=x,this.y=y},Particle.prototype.update=function(){if(this.x=this.startX+=this.vx,this.y=this.startY+=this.vy,this.z=this.startZ-=this.vz,this.rotate(),this.vy+=.1,this.x+=this.vx,this.y+=this.vy,this.z-=this.vz,this.render=!1,this.z>-300){var scale=300/(300+this.z);this.size=2*scale,this.xPos=vanishPointX+this.x*scale,this.yPos=vanishPointY+this.y*scale,this.render=!0}};for(var emitters=[],e=0;e<30;e++)colorCycle(),emitters.push(new Emitter);fireworks.show=function(nextFunc){animate=!0,canvas.show(nextFunc),width=canvas.getSize().x,height=canvas.getSize().y,vanishPointY=height/2,vanishPointX=width/2,render()},fireworks.hide=function(){animate=!1,canvas.hide()},fireworks.resize=function(){canvas.resize()}}(),function(){let animate=!0;const pallet=rainbow(40);let currentColor=0,stepBy=20,clear=!1,docWidth,docHeight;const grow={maxWidth:150,minWidth:50,maxHeight:150,minHeight:50,growBy:8,growWidth:!0,growHeight:!0},rect={x:0,y:0,xStep:stepBy,yStep:stepBy,height:100,width:100};function draw(){const ctx=canvas.ctx;if(ctx.fillStyle=pallet[currentColor++%pallet.length],ctx.shadowColor="#333",ctx.shadowBlur=10,clear){ctx.shadowOffsetX=rect.width-grow.minWidth,ctx.shadowOffsetY=rect.height-grow.minHeight;let shadowOffset=ctx.shadowOffsetX<ctx.shadowOffsetY?ctx.shadowOffsetX:ctx.shadowOffsetY;ctx.shadowBlur=Math.floor(shadowOffset/2)}ctx.fillRect(rect.x,rect.y,rect.width,rect.height)}function update(){rect.width>=grow.maxWidth?grow.growWidth=!1:rect.width<=grow.minWidth&&(grow.growWidth=!0),rect.height>=grow.maxHeight?grow.growHeight=!1:rect.height<=grow.minHeight&&(grow.growHeight=!0),rect.height+=grow.growHeight?grow.growBy:-grow.growBy,rect.width+=grow.growWidth?grow.growBy:-grow.growBy,rect.x>=docWidth-rect.width?rect.xStep=-stepBy:rect.x<=0&&(rect.xStep=stepBy),rect.y>=docHeight-rect.height?rect.yStep=-stepBy:rect.y<=0&&(rect.yStep=stepBy),rect.x+=rect.xStep,rect.y+=rect.yStep}function render(){animate&&(clear&&canvas.ctx.clearRect(0,0,canvas.el.width,canvas.el.height),draw(),update(),window.requestAnimationFrame(render))}const show=function(){filler.resize(),animate=!0,canvas.show(),render()},hide=function(){animate=!1,canvas.hide()},resize=function(){docWidth=$("#celebrations").width(),docHeight=$("#celebrations").height(),rect.x=Math.floor(Math.random()*(docWidth-100)),rect.y=Math.floor(Math.random()*(docHeight-100)),canvas.resize()};filler.show=function(){clear=!1,grow.growBy=8,stepBy=20,show()},filler.hide=hide,filler.resize=resize,bouncer.show=function(){clear=!0,grow.growBy=1,stepBy=rect.xStep=rect.yStep=5,show()},bouncer.hide=hide,bouncer.resize=resize}(),function(){let animate=!1;const pallet=rainbow(12);let leafCount=0;tree.show=function(nextFunc){animate=!0,canvas.show(nextFunc),setup()},tree.hide=function(){animate=!1,canvas.hide()},tree.resize=function(){canvas.resize(),setup()};class Branch{constructor($canvas,branch){this.canvas=$canvas[0],this.context=canvas.ctx,this.canvasWidth=$canvas.width(),this.canvasHeight=$canvas.height(),this.x=this.canvasWidth/2,this.y=this.canvasHeight,this.radius=10,this.speed=this.canvasWidth/500,this.angle=Math.PI/2,this.generation=0,this.lifespan=0,this.totalDistance=0,this.distance=0,this.depth=0,branch&&(this.x=branch.x,this.y=branch.y,this.angle=branch.angle,this.speed=branch.speed,this.radius=.95*branch.radius,this.generation=branch.generation+1,this.fillStyle=branch.fillStyle,this.totalDistance=branch.totalDistance,this.depth=branch.depth+1)}split(){var splitChance=(this.distance-this.canvasHeight/(0==this.generation?5:10))/100;if(Math.random()<splitChance){for(var n=2+Math.round(2*Math.random()),i=0;i<n;i++)branchCollection.add(new Branch($(canvas.el),this));branchCollection.remove(this)}}next(){this.draw(),this.iterate(),this.angle+=Math.random()/5-.1,this.split(),this.lifespan++,this.killBranchIfTooSmall()}draw(){var ctx=this.context;ctx.save(),ctx.fillStyle="#333333",ctx.shadowColor="rgba(0, 0, 0, .3)",ctx.shadowBlur=8,ctx.shadowOffsetX=5,ctx.shadowOffsetY=5,ctx.beginPath(),ctx.moveTo(this.x,this.y),ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),ctx.restore()}iterate(){var lastX=this.x,lastY=this.y;this.x+=this.speed*Math.cos(this.angle),this.y+=this.speed*-Math.sin(this.angle),this.radius*=.99-this.generation/250;var deltaDistance=Math.sqrt(Math.abs(lastX-this.x)+Math.abs(lastY-this.y));this.distance+=deltaDistance,this.totalDistance+=deltaDistance,this.speed>2*this.radius&&(this.speed=2*this.radius)}killBranchIfTooSmall(){this.radius<.2&&(branchCollection.remove(this),this.drawLeaf(this.x,this.y))}drawLeaf(x,y){var ctx=this.context;ctx.fillStyle=pallet[leafCount++%pallet.length],ctx.strokeStyle=pallet[leafCount%pallet.length],ctx.beginPath(),ctx.ellipse(x,y,3,9,this.angle,0,2*Math.PI),ctx.fill(),ctx.stroke()}}const branchCollection={branches:[],next:function(){for(var s in branchCollection.branches)branchCollection.branches[s]&&branchCollection.branches[s].next()},add:function(branch){branchCollection.branches.push(branch)},remove:function(branch){for(var s in branchCollection.branches)branchCollection.branches[s]===branch&&branchCollection.branches.splice(s,1);branchCollection.branches.length||(animate=!1)}};function setup(){const $canvas=$(canvas.el);for(var width=$canvas.width(),n=4+8*Math.random(),initialRadius=width/50,i=0;i<n;i++){const branch=new Branch($canvas);branch.x=width/2-initialRadius+i*initialRadius*2/n,branch.radius=initialRadius,branchCollection.add(branch)}let render=function(){branchCollection.next(),animate&&requestAnimationFrame(render)};render()}}(),aquarium.show=function(nextFunc){$("#aquarium-celebration").show()},aquarium.hide=function(){$("#aquarium-celebration").hide()},bear.show=function(nextFunc){$("#bear-celebration").show()},bear.hide=function(){$("#bear-celebration").hide()},stars.show=function(nextFunc){$("#stars-celebration").show()},stars.hide=function(){$("#stars-celebration").hide()};